---
import Button from "../ui/Button.solid.tsx";
import ImageTrail from "../ui/ImageTrail.tsx";
---

<section class="flex flex-col px-4 sm:px-8 md:px-20 py-16 md:py-26">
  <div
    id="hero-title"
    class="flex flex-col justify-center w-full max-w-3xl mx-auto
          sm:px-6 md:px-12
           py-12 sm:py-12 md:py-12
           min-h-[70vh] md:min-h-[50vh]
           text-center md:text-left select-none relative"
  >
    <div
      id="image-trail-container"
      class="absolute inset-0 z-100 h-full w-full"
    >
      <ImageTrail
        client:load
        items={[
          "/gwej/gwej1.JPG",
          "/gwej/gwej2.JPG",
          "/gwej/gwej3.JPG",
          "/gwej/gwej4.jpeg",
          "/gwej/gwej5.JPG",
        ]}
        variant={1}
      />
    </div>

    <h1
      class="font-['Instrument_Serif'] font-[400] text-black
             text-[clamp(3rem,8vw,5.875rem)] md:text-[clamp(2.5rem,8vw,5.875rem)]
             leading-[1.08] md:leading-[1.05] tracking-[-0.04em] md:tracking-[-0.06rem] z-10"
    >
      <span
        class="inline-flex items-center justify-center md:justify-start gap-3 md:gap-0"
      >
        <span>Hi, I'm Naufal</span>
        <img
          src="/images/nopals.png"
          alt="Naufal"
          class="w-[6rem] sm:w-[5.5rem] md:w-[13rem] h-auto rounded-xl inline-block z-50 translate-y-[0.05em]"
        />
      </span>

      <div class="mt-1 md:-mt-7 leading-tight md:leading-24">
        <span class="font-normal">
          <span class="text-black"> Ardian a</span>
          <span class="text-[#0048BF]"> Technology Enthusiast.</span>
        </span>
      </div>
    </h1>

    <p
      class="mt-4 text-gray-600 max-w-2xl mx-auto md:mx-0
             text-base sm:text-lg md:text-xl font-sans transition-opacity duration-300 z-10"
    >
      Tech enthusiast. Lifelong learner. Builder of meaningful things.
    </p>
  </div>
  <div class="w-full max-w-3xl mx-auto px-4 sm:px-6 md:px-12">
    <div
      class="flex flex-col sm:flex-row gap-3 sm:gap-4
           justify-center md:justify-start items-center md:items-start
           text-xl z-10 mb-64"
    >
      <Button variant="primary" href="mailto:naufalportofolio12@gmail.com">
        Talk with me
      </Button>

      <Button variant="outline" href="/cv/CV_Naufal-Ardian.pdf" target="_blank">
        Download my CV
      </Button>
    </div>
  </div>

  <div
    class="flex flex-col md:flex-row items-center md:items-center justify-between gap-6 md:gap-0"
  >
    <div
      class="flex flex-wrap justify-center md:justify-start gap-x-6 gap-y-2 text-lg md:text-xl text-gray-500"
    >
      <a class="hover:text-[#0048BF]" href="https://x.com/nuopall">Twitter</a>
      <a class="hover:text-[#0048BF]" href="https://dribbble.com/NaufalAR"
        >Dribbble</a
      >
      <a
        class="hover:text-[#0048BF]"
        href="https://github.com/NaufalArdian12"
        target="_blank">GitHub</a
      >
      <a
        class="hover:text-[#0048BF]"
        href="https://linkedin.com/in/naufalardianr"
        target="_blank">LinkedIn</a
      >
    </div>

    <div class="flex items-center text-gray-500">
      <a
        href="#about"
        class="flex items-center gap-2 px-4 py-2 rounded-lg border border-black/10 hover:bg-black/5 transition"
      >
        <span>Discover</span>
        <img src="/icons/CaretDoubleDown.svg" alt="down" class="w-4 h-4" />
      </a>
    </div>
  </div>
</section>

<style>
  /*
     Sekarang ImageTrail selalu bisa menerima event mousemove,
     tapi hanya muncul saat hero-title di-hover.
  */
  #image-trail-container {
    opacity: 0; /* Opacity awal harus 0 */
    transition: opacity 0.3s; /* Tambahkan transisi di CSS */
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  #hero-title:hover #image-trail-container {
    opacity: 1; /* Muncul saat hover */
  }
</style>

<script>
  import { animate, anticipate } from "motion";

  const title = document.getElementById("hero-title");

  const runHeroAnim = () => {
    if (!title) return;
    animate(
      title,
      {
        opacity: [0, 1],
        transform: ["translateY(24px)", "translateY(0)"],
      } as any,
      { duration: 0.9, easing: "ease-in-out" } as any
    );
  };

  const observer = new MutationObserver(() => {
    if (document.documentElement.classList.contains("revealed")) {
      runHeroAnim();
      observer.disconnect();
    }
  });

  observer.observe(document.documentElement, { attributes: true });
</script>
